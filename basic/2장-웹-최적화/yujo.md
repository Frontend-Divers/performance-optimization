# 2장 웹 최적화

## 2.1 웹 최적화란

- 웹 최적화란 최고의 웹 성능을 구현하기 위해 최고의 조건을 만드는 다양한 노력을 의미

### 2.1.1 프런트엔드 최적화

- 스크립트 병합으로 브라우저 호출 개수 줄임
- 스크립트 크기를 최소화 함
- 스크립트를 gizp 등으로 압축하여 전달
- WebP 등으로 이미지 최적화
- 이미지 손실, 무손실 압축
- Cache-Control 헤더를 통해 브라우저 캐시 충실히 사용
- 도메인 수를 줄여 DNS 요청 최소화
- DNS 정보 미리 읽어 오기
- CSS를 HTML 상단에, JS를 HTML 하단에 위치
- 페이지 미리 읽어오기 (page prefetching)

### 2.1.2 백엔드 최적화

- DNS 응답을 빠르게 하기 위한 서버 증설
- DNS 응답을 빠르게 하기 위한 DNS 캐싱
- 네트워크 출력/대역폭 증설
- CDN 사용
- DB 정규화
- 로드 밸런싱

## 2.2 TCP/IP 프로토콜

### 2.2.1 TCP 혼잡 제어

- TCP 혼잡 제어는 TCP 네트워크의 통신량을 조절하여 TCP 네트워크가 혼잡해지지 않도록 하는 방식을 의미.
- TCP 네트워크의 통신량이 실제 처리량보다 많아서 문제가 발생하는 것을 TCP 혼잡 붕괴라고 한다.
- TCP 혼잡 제어 기술은 패킷을 보내는 쪼에서 네트워크에서 수용할 수 있는 양을 파악하고 그만큼의 패킷만 보내는 약속으로 TCP 혼잡을 해결합니다.

**느린 시작**

- 느린 시작은 TCP연결이 시작되면 버퍼의 양인 혼잡 윈도우의 초기값을 작게 설정하여 전송.
- 최초 패킷을 1개만 보내고 패킷의 정상 수신 응답인 ACK를 받으면 처음 보낸 패킷의 2배인 2개 패킷을 전송.
- 즉, 패킷이 정상적으로 도착할 때마다 더 많은 패킷을 보내고, 패킷 유실이 발생하기 전까지 반복하는 방식

**빠른 재전송**

- 1먼저 도착해야 하는 패킷이 도착하지 않고 다음 패킷이 도착한 경우에도 수신자가 일단 ACK 패킷을 보내는 방식.
- 중간에 패킷이 하나 손실되면 송신자는 중복된 ACK 패킷을 통해 이를 감지하고 정상적으로 전송되지 않은 패킷을 재전송.

**흐름 제어**

- 흐름 제어는 TCP 송신자가 데이터를 너무 빠르게 혹은 너무 많이 전송하여 수신자의 버퍼가 overflow 되는걸 방지하는 기술.
- 송신자가 데이터를 전송하는 속도를 애플리케이션 프로세스를 읽는 속도와 유사한 수준으로 만들어 트래픽 수신 속도를 송신 속도와 일치시키는 기술.

## 2.3 HTTP 프로토콜

### 2.3.1 HTTP 최적화 기술

- HTTP/0.9 -클라이언트와 서버의 인터넷 통신 정상화, 가용성, 신뢰성 등 기능에 초점
- HTTP/1.0 - 클라이언트와 서버 사이 요청과 응답을 빠르게 할 수 있는 연구 진행
- HTTP/1.1 - 멀티호스트 기능과 클라이언트 서버 사이에서 TCP/IP 연결을 재사용하는 기능을 추가한 것이 두드러진 업데이트 내용

- HTTP/1.1 버전부터 적용된 연결 재사용, 파이프라이닝 기법이 연결 기반의 HTTP 최적화 기술

### 2.3.2 HTTP 지속적 연결

- HTTP/1.1에서는 클라이언트와 서버의 HTTP 지속적 연결을 기본으로 지원, 필요 없는 경우에만 close 요청을 통해 지속적 연결 사용하지 않음
- HTTP/2 에서는 단일 TCP 연결을 통해 클라이언트와 서버 사이 응답 지연 없이 스트림 형태로 다수의 HTTP 요청과 응답으 ㄹ주고받을 수 있는 멀티플렉싱 기술의 토대를 만듦.
- 따라서, HTTP/2를 사용한다면 지속적 연결을 고민할 필요가 없음.

### 2.3.3 HTTP 파이프라이닝

- 먼저 보낸 요청의 응답이 없어도 다음 요청을 병렬적으로 수신자 측에 전송하는 기술.
- 따라서 중간에서 응답 지연이 발생하더라도 클라이언트는 먼저 서버 측의 응답을 받을 수 있어 전체적으로 빠른 웹 로딩 구현.

## 2.4 DNS

### 2.4.1 DNS의 작동 원리

- 브라우저 주소 창에 example.com을 입력했을 때

  1. 로컬 DNS 서버로 질의

  2. 루트 DNS 서버로 질의

  3. .com DNS 서버로 질의
  4. exmaple.com DNS 서버로 질의

